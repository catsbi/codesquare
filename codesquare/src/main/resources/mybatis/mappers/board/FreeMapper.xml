<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bit.codesquare.mapper.board.FreeMapper">

<!-- 
<select id="getfree" resultType="Board">
	SELECT * FROM codesquare.Board where BoardKindId='ComFr' order by id desc
</select> -->

<select id="insert" resultType="Board" parameterType="Board">
		INSERT INTO codesquare.Board (boardKindId, userId, nickname, title, content, Hit) VALUES 
		('ComFr', 'test112', 'testNickName', #{title}, #{content}, 0)
</select>
<select id="getfree" resultType="Board">
	<![CDATA[
			select
				id, userid, nickname, title, content, writedate, modifydate, hit
			from
				codesquare.Board
			where BoardKindid='ComFr'
			
			and id > 0
	]]>
	<![CDATA[	
			order by id desc, writedate desc
			limit #{pageStart}, #{perPageNum}
	]]>
	
	</select>
	
	<select id="countPaging" resultType="int">
	<![CDATA[
			select
				count(id)
			from
				Board
			where Board.BoardKindId='ComFr' > 0
		]]>
	</select>
	
	<select id="freeSearch" parameterType="Board" resultType="Board">
		select * from codesquare.Board
		where
		<choose>
			<when test="searchOption == 'all'">
			
				content like CONCAT('%',#{keyword},'%')
				or title like CONCAT('%',#{keyword},'%')
			</when>
			<otherwise>
				${searchOption} like CONCAT('%',#{keyword},'%')
			</otherwise>
		</choose>
		order by id desc
	</select>
</mapper>