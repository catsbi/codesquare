<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper
	namespace="com.bit.codesquare.mapper.member.MessageInfoMapper">

	<select id="getReceivedMessageList" resultType="MessageInfo">
		select * from
		MessageInfo where Recipient = #{userId} and ShowStatus = '정상'
	</select>

	<select id="getSentMessageList" resultType="MessageInfo">
		select * from
		MessageInfo where Sender = #{userId}
	</select>

	<insert id="sendMessage">
		insert into MessageInfo (Recipient, Sender, SenderNickName, MessageTitle,
		MessageContent) VALUES (#{recipient}, #{sender}, #{senderNickName},
		#{messageTitle}, #{messageContent})
	</insert>

	<select id="readMessage" resultType="MessageInfo">
		select * from MessageInfo
		where id= #{id}
	</select>

	<update id="changeToRead">
		update MessageInfo set ReadDate = CURRENT_TIMESTAMP,
		ReadStatus = '읽음' where id = #{id}
	</update>

	<update id="deleteMessage">
		update MessageInfo set ShowStatus = '삭제' where id =  #{id}
	</update>
</mapper>